@using Microsoft.AspNetCore.Identity
@model IEnumerable<TshirtCo_NN.Models.Order>
@inject UserManager<ApplicationUser> UserManager
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutPlain.cshtml";
}

<h2>Index</h2>
<div class="large-form-container">
    <table class="table">
        <thead>
            <tr>
                <th>
                    name
                </th>
                <th>
                    email
                </th>
                <th>
                    address
                </th>
                <th>
                    town
                </th>
                <th>
                    city
                </th>
                <th>
                    postcode
                </th>
                <th>
                    order total
                </th>
                <th>
                    order date
                </th>
            </tr>
        </thead>
        <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FirstName) @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td>
                    @UserManager.GetUserName(User)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.AddressLn1)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.AddressLn2)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.City)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PostCode)
                </td>
                <td>
                    @item.OrderLines.Sum(t => t.Quantity * (t.Price))
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.OrderDate)
                </td>
                <td>
                    @*<a asp-action="Edit" asp-route-id="@item.OrderId">edit</a>*@
                    <a asp-action="Details" asp-route-id="@item.OrderId">details</a>
                    <a asp-action="Delete" asp-route-id="@item.OrderId">delete</a>
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>
